<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AresNyX Boxer Shorts Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
<style>
:root {
    --font-primary: 'Montserrat', sans-serif;
    --color-dark-bg: #121212;
    --color-accent-gold: #E6D8B0;
    --color-button: #000;
    --color-button-text: #fff;
    --color-light-bg: #f5f5f5;
    --color-text-main: #333;
    --color-outline-btn: #000;
}
body {
    font-family: var(--font-primary);
    margin:0; padding:0;
    background: #fff;
    color: var(--color-text-main);
}
header {
    background:var(--color-dark-bg);
    color:#fff;
    padding:20px 30px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
header h1 { margin:0; font-size:1.8em; font-weight:300; color: var(--color-accent-gold); letter-spacing:2px; text-transform:uppercase; }
.cart-icon { cursor:pointer; position:relative; font-weight:300; color:#DDD; transition:color 0.3s; }
.cart-icon:hover { color: var(--color-accent-gold); }
.cart-count { position:absolute; top:-8px; right:-8px; background:#C7574B; color:white; border-radius:50%; padding:2px 6px; font-size:0.8em; font-weight:600; }

.products {
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:20px;
    padding:40px 30px;
    max-width:900px;
    margin:0 auto;
}
.product {
    background:var(--color-light-bg);
    padding:15px;
    border-radius:5px;
    text-align:center;
    cursor:pointer;
    transition: box-shadow 0.3s;
}
.product:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
.product img { width:100%; height:auto; margin-bottom:10px; background:#f7f7f7; }
.product h3 { margin:5px 0 2px; font-size:1.1em; font-weight:600; }
.product p { margin:0 0 5px; font-size:0.9em; font-weight:300; }
.product p:last-of-type { margin-bottom:10px; font-weight:600; color: var(--color-button); }

/* FULLSCREEN MODAL */
.modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    justify-content:center;
    align-items:center;
    z-index:1000;
}
.modal-content {
    background:#fff;
    padding:20px;
    width:90%;
    max-width:500px;
    text-align:center;
    position:relative;
}
.modal-content img { width:50%; margin-bottom:15px; }
.modal-content h3 { margin:10px 0 5px; }
.modal-content p { margin:5px 0; font-weight:300; }
.size-select { margin:10px 0; padding:5px; font-size:1em; }
.qty-controls { display:flex; justify-content:center; align-items:center; gap:10px; margin:10px 0; font-size:1.2em; }
.qty-controls span { min-width:20px; display:inline-block; text-align:center; }
.add-to-cart-modal {
    background: var(--color-button);
    color: var(--color-button-text);
    border:none;
    padding:12px 20px;
    cursor:pointer;
    font-weight:600;
    text-transform:uppercase;
    margin:5px 0;
}
.continue-shopping {
    background:#fff;
    color:#000;
    border:1px solid var(--color-outline-btn);
    padding:10px 20px;
    cursor:pointer;
    font-weight:600;
    text-transform:uppercase;
    margin:20px auto 40px;
    display:block;
    width:200px;
}

/* TABLE MERA */
.size-table {
    margin-top:15px;
    border-collapse:collapse;
    width:100%;
}
.size-table th, .size-table td { border:1px solid #ccc; padding:5px; font-size:0.9em; }
.size-table th { background:#f0f0f0; }

/* CART POPUP */
.cart-popup {
    display:none;
    position:fixed;
    top:80px; right:30px;
    background:white;
    border:1px solid #ccc;
    width:350px;
    max-height:450px;
    overflow:auto;
    z-index:1000;
    box-shadow:0 5px 20px rgba(0,0,0,0.1);
    padding:20px;
}
.cart-popup h3 { margin-top:0; font-size:1.5em; border-bottom:1px solid #eee; padding-bottom:10px;}
.cart-popup table { width:100%; border-collapse:collapse;}
.cart-popup th, .cart-popup td { border-bottom:1px solid #eee; padding:8px 5px; text-align:left; font-weight:300;}
.cart-popup th { font-weight:600;}
.cart-popup tfoot td { border-top:1px solid #ccc; font-weight:600; padding-top:10px;}
.close-cart { background:#000; color:#fff; border:none; padding:5px 8px; cursor:pointer; float:right; border-radius:2px; }

/* RESPONSIVE */
@media (max-width:600px){.products{grid-template-columns:repeat(2,1fr); gap:15px; padding:20px 10px;}}
</style>
</head>
<body>

<header>
<h1>ARESNYX</h1>
<div class="cart-icon" onclick="toggleCart()">üõí KORPA <span class="cart-count" id="cartCount">0</span></div>
</header>

<section class="products">
  <div class="product" data-name="Pamuk" data-price="1300">
    <img src="images/placeholder1.jpg" alt="Pamuk">
    <h3>Pamuk</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Lan" data-price="1300">
    <img src="images/placeholder2.jpg" alt="Lan">
    <h3>Lan</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Svila" data-price="1300">
    <img src="images/placeholder3.jpg" alt="Svila">
    <h3>Svila</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Crna" data-price="1300">
    <img src="images/placeholder4.jpg" alt="Crna">
    <h3>Crna</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Bela" data-price="1300">
    <img src="images/placeholder5.jpg" alt="Bela">
    <h3>Bela</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Prugasto Plavo" data-price="1300">
    <img src="images/placeholder6.jpg" alt="Prugasto Plavo">
    <h3>Prugasto Plavo</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Prugasto Sivo" data-price="1300">
    <img src="images/placeholder7.jpg" alt="Prugasto Sivo">
    <h3>Prugasto</h3>
    Sivo</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
  <div class="product" data-name="Prugasto" data-price="1300">
    <img src="images/placeholder8.jpg" alt="Prugasto">
    <h3>Prugasto</h3>
    <p>100% pamuk</p>
    <p>1300 RSD</p>
  </div>
</section>

<button class="continue-shopping" onclick="window.history.back()">NASTAVI KUPOVINU</button>

<!-- FULLSCREEN MODAL -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()" style="position:absolute;top:10px;right:10px;cursor:pointer;font-size:1.2em;">&times;</span>
    <img id="modalImg" src="" alt="">
      <!-- TROUGAO/LENJIR ILUSTRACIJA -->
<div id="sizeDiagram" style="margin:15px 0; text-align:center; cursor:pointer;" onclick="document.getElementById('sizeTable').scrollIntoView({behavior:'smooth'});">
  <svg width="100" height="100" viewBox="0 0 100 100">
    <!-- Osnovni trougao tela boksera -->
    <polygon points="50,10 90,90 10,90" fill="#f0f0f0" stroke="#333" stroke-width="2"/>
    <!-- Linija struk -->
    <line x1="30" y1="70" x2="70" y2="70" stroke="#C7574B" stroke-width="2" marker-end="url(#arrow)"/>
    <!-- Linija du≈æina -->
    <line x1="50" y1="10" x2="50" y2="90" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
    <defs>
      <marker id="arrow" markerWidth="6" markerHeight="6" refX="0" refY="3" orient="auto">
        <path d="M0,0 L0,6 L6,3 z" fill="#C7574B" />
      </marker>
    </defs>
  </svg>
  <div style="font-size:0.85em; color:#333; margin-top:5px;">Klik na linije za detalj</div>
</div>
    <h3 id="modalName"></h3>
    <p id="modalMaterial">100% pamuk</p>
    <p id="modalPrice"></p>
    <select id="modalSize" class="size-select">
      <option value="M">M</option>
      <option value="L">L</option>
      <option value="XL">XL</option>
      <option value="XXL">XXL</option>
    </select>
    <div class="qty-controls">
      <span style="cursor:pointer;" onclick="changeQty(-1)">-</span>
      <span id="modalQty">1</span>
      <span style="cursor:pointer;" onclick="changeQty(1)">+</span>
    </div>
    <button class="add-to-cart-modal" onclick="addToCart()">DODAJ U KORPU</button>

    <!-- Tabela mera -->
    <table class="size-table" id="sizeTable">
      <tr><th>Veliƒçina</th><th>Struk (cm)</th><th>Du≈æina (cm)</th></tr>
      <tr><td>M</td><td>76-80</td><td>30</td></tr>
      <tr><td>L</td><td>81-85</td><td>31</td></tr>
      <tr><td>XL</td><td>86-90</td><td>32</td></tr>
      <tr><td>XXL</td><td>91-95</td><td>33</td></tr>
    </table>
  </div>
</div>

<!-- CART POPUP -->
<div class="cart-popup" id="cartPopup">
  <h3>KORPA <button class="close-cart" onclick="toggleCart()">√ó</button></h3>
  <table id="cartTable">
    <thead><tr><th>Proizvod</th><th>Veliƒçina</th><th>Koliƒçina</th><th>Cena</th></tr></thead>
    <tbody></tbody>
    <tfoot>
      <tr><td colspan="3">Po≈°tarina:</td><td id="shipping">0 RSD</td></tr>
      <tr><td colspan="3">Popust:</td><td id="discount">0 RSD</td></tr>
      <tr><td colspan="3">Ukupno:</td><td id="total">0 RSD</td></tr>
    </tfoot>
  </table>
</div>

<script>
let modal = document.getElementById('productModal');
let modalImg = document.getElementById('modalImg');
let modalName = document.getElementById('modalName');
let modalPrice = document.getElementById('modalPrice');
let modalQty = document.getElementById('modalQty');
let modalSize = document.getElementById('modalSize');
let qty = 1;
let cart = [];

document.querySelectorAll('.product').forEach(prod=>{
  prod.addEventListener('click', ()=>{
    modal.style.display = 'flex';
    modalImg.src = prod.querySelector('img').src;
    modalName.textContent = prod.dataset.name;
    modalPrice.textContent = prod.dataset.price + ' RSD';
    qty = 1;
    modalQty.textContent = qty;
    modalSize.value = "M";
  });
});

function closeModal(){ modal.style.display='none'; }

function changeQty(delta){
  qty += delta;
  if(qty<1) qty=1;
  modalQty.textContent = qty;
}

function addToCart(){
  let product = {
    name: modalName.textContent,
    size: modalSize.value,
    price: parseInt(modalPrice.textContent),
    qty: qty
  };
  // Ako vec postoji u korpi sa istom veliƒçinom
  let exists = cart.find(p=>p.name===product.name && p.size===product.size);
  if(exists){ exists.qty += product.qty; } else { cart.push(product); }
  updateCart();
  closeModal();
}

function toggleCart(){
  let cp = document.getElementById('cartPopup');
  cp.style.display = cp.style.display==='block'?'none':'block';
}

function updateCart(){
  let tbody = document.querySelector('#cartTable tbody');
  tbody.innerHTML='';
  let total = 0;
  let totalItems = 0;
  cart.forEach((item,i)=>{
    total += item.price*item.qty;
    totalItems += item.qty;
    let tr = document.createElement('tr');
    tr.innerHTML=`<td>${item.name}</td>
    <td>${item.size}</td>
    <td><span style="cursor:pointer;" onclick="changeCartQty(${i},-1)">-</span> ${item.qty} <span style="cursor:pointer;" onclick="changeCartQty(${i},1)">+</span></td>
    <td>${item.price*item.qty} RSD</td>`;
    tbody.appendChild(tr);
  });

  // Po≈°tarina i popust
  let shipping = totalItems>=5?0:400;
  let discount = totalItems>=7? Math.floor(total*0.1) : 0;
  let final = total - discount + shipping;

  document.getElementById('shipping').textContent = shipping+' RSD';
  document.getElementById('discount').textContent = discount+' RSD';
  document.getElementById('total').textContent = final+' RSD';

  document.getElementById('cartCount').textContent = totalItems;
}

function changeCartQty(index,delta){
  cart[index].qty += delta;
  if(cart[index].qty<1) cart.splice(index,1);
  updateCart();
}
</script>
</body>
</html>
