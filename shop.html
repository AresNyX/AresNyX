<!DOCTYPE html>
<html lang="sr">
<head>
    <!-- GOOGLE ANALYTICS 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-63WM74353T"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-63WM74353T');
    </script>
    
    <!-- ENHANCED TRACKING ZA ARESNYX -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Track CTA button clicks
      const trackCTA = (button, label) => {
        button.addEventListener('click', () => {
          gtag('event', 'select_content', {
            content_type: 'button',
            content_id: label,
            method: 'click'
          });
          gtag('event', 'cta_click', {
            button_text: button.textContent.trim(),
            page_location: window.location.pathname
          });
        });
      };

      // Track all CTA buttons
      document.querySelectorAll('.cta-button, .hero-cta-button').forEach(btn => {
        trackCTA(btn, btn.classList.contains('hero-cta-button') ? 'hero_cta' : 'regular_cta');
      });

      // Track navigation clicks
      document.querySelectorAll('#main-nav a').forEach(link => {
        link.addEventListener('click', () => {
          gtag('event', 'navigation_click', {
            menu_item: link.textContent.trim(),
            menu_url: link.getAttribute('href')
          });
        });
      });

      // Track scroll depth
      let scrollPercentages = [25, 50, 75, 90];
      let trackedScrolls = [];
      
      window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = Math.floor((scrollTop / scrollHeight) * 100);
        
        scrollPercentages.forEach(percent => {
          if (scrolled >= percent && !trackedScrolls.includes(percent)) {
            gtag('event', `scroll_${percent}_percent`);
            trackedScrolls.push(percent);
          }
        });
      });

      // Track time on page
      let pageStartTime = Date.now();
      window.addEventListener('beforeunload', () => {
        const timeSpent = Math.round((Date.now() - pageStartTime) / 1000);
        if (timeSpent > 10) {
          gtag('event', 'time_on_page', {
            time_seconds: timeSpent,
            page_path: window.location.pathname
          });
        }
      });
    });
    </script>
    <!-- E-COMMERCE TRACKING - DINAMIČKI ZA ARESNYX -->
<script>
// Dinamičko praćenje proizvoda iz shop.loadProducts()
const ga4Tracking = {
    products: {},
    
    init: function() {
        this.overrideShopFunctions();
        this.setupEventListeners();
        console.log('GA4 E-commerce tracking initialized');
    },
    
    overrideShopFunctions: function() {
        // Presretni shop.loadProducts da znamo koje proizvode imamo
        if (window.shop && window.shop.loadProducts) {
            const originalLoadProducts = window.shop.loadProducts;
            window.shop.loadProducts = function() {
                const result = originalLoadProducts.apply(this, arguments);
                
                // Sačekaj da se DOM ažurira, pa prikupi proizvode
                setTimeout(() => {
                    ga4Tracking.collectProducts();
                    ga4Tracking.trackProductListView();
                }, 300);
                
                return result;
            };
        }
        
        // Presretni openModal za view_item tracking
        if (window.shop && window.shop.openModal) {
            const originalOpenModal = window.shop.openModal;
            window.shop.openModal = function(productId) {
                ga4Tracking.trackProductView(productId);
                return originalOpenModal.apply(this, arguments);
            };
        }
        
        // Presretni addToCartFromModal
        if (window.shop && window.shop.addToCartFromModal) {
            const originalAddToCart = window.shop.addToCartFromModal;
            window.shop.addToCartFromModal = function(event) {
                ga4Tracking.trackAddToCart(event);
                return originalAddToCart.apply(this, arguments);
            };
        }
        
        // Presretni toggleCart za view_cart
        if (window.shop && window.shop.toggleCart) {
            const originalToggleCart = window.shop.toggleCart;
            window.shop.toggleCart = function() {
                const isOpening = !document.getElementById('cartSidebar').classList.contains('active');
                if (isOpening) {
                    ga4Tracking.trackViewCart();
                }
                return originalToggleCart.apply(this, arguments);
            };
        }
    },
    
    collectProducts: function() {
        // Prikupi sve proizvode iz productsGrid
        const productCards = document.querySelectorAll('.product-card, [data-product-id], .product-item');
        
        this.products = {};
        
        productCards.forEach((card, index) => {
            const productId = card.getAttribute('data-product-id') || 
                             card.classList.value.match(/product-(\w+)/)?.[1] || 
                             'product_' + (index + 1);
            
            // Ekstraktuj informacije iz kartice
            const titleElem = card.querySelector('h3, .product-title, .product-name');
            const priceElem = card.querySelector('.product-price, .price, [data-price]');
            const materialElem = card.querySelector('.product-material, .material, [data-material]');
            
            const productName = titleElem ? titleElem.textContent.trim() : `Proizvod ${index + 1}`;
            const priceText = priceElem ? priceElem.textContent.trim() : '0';
            const price = this.extractPrice(priceText);
            const material = materialElem ? materialElem.textContent.trim() : 
                          card.classList.value.match(/pamuk|lan|bambus|svila/)?.[0] || 'standard';
            
            this.products[productId] = {
                id: productId,
                name: productName,
                category: 'Donji veš',
                material: material.toLowerCase(),
                price: price,
                currency: 'RSD'
            };
            
            // Dodaj click tracking
            this.setupProductClick(card, productId);
        });
        
        console.log('GA4: Collected', Object.keys(this.products).length, 'products');
    },
    
    extractPrice: function(priceText) {
        // Ekstraktuj broj iz teksta cene (npr. "1.999 RSD" -> 1999)
        const match = priceText.match(/(\d+[.,]?\d*)/);
        if (match) {
            let price = match[1].replace('.', '').replace(',', '.');
            return parseFloat(price) || 0;
        }
        return 0;
    },
    
    setupProductClick: function(card, productId) {
        card.addEventListener('click', (e) => {
            // Preskoči ako je klik na dugme unutar kartice
            if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
                return;
            }
            
            if (this.products[productId]) {
                this.trackProductClick(productId);
            }
        });
    },
    
    trackProductListView: function() {
        if (typeof gtag !== 'function') return;
        
        const products = Object.values(this.products);
        if (products.length === 0) return;
        
        gtag('event', 'view_item_list', {
            items: products.map(p => ({
                item_id: p.id,
                item_name: p.name,
                item_category: p.category,
                item_variant: p.material,
                price: p.price,
                currency: p.currency
            })),
            item_list_name: 'AresNyX Kolekcija',
            item_list_id: 'main_shop'
        });
        
        console.log('GA4: Tracked product list view with', products.length, 'products');
    },
    
    trackProductClick: function(productId) {
        if (typeof gtag !== 'function' || !this.products[productId]) return;
        
        const product = this.products[productId];
        
        gtag('event', 'select_item', {
            items: [{
                item_id: product.id,
                item_name: product.name,
                item_category: product.category,
                item_variant: product.material,
                price: product.price,
                currency: product.currency,
                item_list_name: 'AresNyX Kolekcija'
            }]
        });
        
        console.log('GA4: Tracked product click:', product.name);
    },
    
    trackProductView: function(productId) {
        if (typeof gtag !== 'function') return;
        
        // Pokušaj da pronađeš proizvod iz skupljenih ili iz modala
        let product = this.products[productId];
        
        if (!product) {
            // Ako nema u skupljenim, pokušaj da dobiješ iz modala
            const modalTitle = document.getElementById('modalTitle');
            const modalPrice = document.getElementById('modalPrice');
            
            if (modalTitle && modalPrice) {
                product = {
                    id: productId,
                    name: modalTitle.textContent.trim(),
                    category: 'Donji veš',
                    material: this.extractMaterialFromName(modalTitle.textContent),
                    price: this.extractPrice(modalPrice.textContent),
                    currency: 'RSD'
                };
            }
        }
        
        if (product) {
            gtag('event', 'view_item', {
                currency: product.currency,
                value: product.price,
                items: [{
                    item_id: product.id,
                    item_name: product.name,
                    item_category: product.category,
                    item_variant: product.material,
                    price: product.price
                }]
            });
            
            console.log('GA4: Tracked product view:', product.name);
        }
    },
    
    extractMaterialFromName: function(name) {
        const materials = ['pamuk', 'lan', 'bambus', 'svila'];
        const lowerName = name.toLowerCase();
        
        for (const material of materials) {
            if (lowerName.includes(material)) {
                return material;
            }
        }
        return 'standard';
    },
    
    trackAddToCart: function(event) {
        if (typeof gtag !== 'function') return;
        
        // Pokušaj da dobiješ podatke iz modala
        const modalTitle = document.getElementById('modalTitle');
        const modalPrice = document.getElementById('modalPrice');
        const modalQty = document.getElementById('modalQty');
        const selectedSize = document.querySelector('.size-btn.selected, .size-selector .selected');
        
        if (modalTitle && modalPrice) {
            const productName = modalTitle.textContent.trim();
            const price = this.extractPrice(modalPrice.textContent);
            const quantity = modalQty ? parseInt(modalQty.textContent) : 1;
            const size = selectedSize ? selectedSize.textContent.trim() : 'standard';
            const material = this.extractMaterialFromName(productName);
            
            // Generiši productId
            const productId = 'product_' + productName.toLowerCase().replace(/\s+/g, '_');
            
            gtag('event', 'add_to_cart', {
                currency: 'RSD',
                value: price * quantity,
                items: [{
                    item_id: productId,
                    item_name: productName,
                    item_category: 'Donji veš',
                    item_variant: material + '_' + size,
                    price: price,
                    quantity: quantity
                }]
            });
            
            console.log('GA4: Tracked add to cart:', productName, quantity + 'x', price + ' RSD');
        }
    },
    
    trackViewCart: function() {
        if (typeof gtag !== 'function') return;
        
        // Pokušaj da dobiješ korpu iz localStorage
        try {
            const cart = JSON.parse(localStorage.getItem('aresnyx_cart') || '[]');
            if (cart.length > 0) {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                
                gtag('event', 'view_cart', {
                    currency: 'RSD',
                    value: total,
                    items: cart.map(item => ({
                        item_id: item.id || 'unknown',
                        item_name: item.name || 'Proizvod',
                        item_category: item.category || 'Donji veš',
                        item_variant: item.variant || 'standard',
                        price: item.price || 0,
                        quantity: item.quantity || 1
                    }))
                });
                
                console.log('GA4: Tracked view cart with', cart.length, 'items');
            }
        } catch (e) {
            console.log('GA4: Could not track cart view:', e);
        }
    },
    
    setupEventListeners: function() {
        // Pratite checkout
        document.addEventListener('click', (e) => {
            if (e.target.closest('.checkout-btn')) {
                this.trackBeginCheckout();
            }
            
            if (e.target.closest('.submit-order-btn')) {
                this.trackPurchase();
            }
        });
    },
    
    trackBeginCheckout: function() {
        if (typeof gtag !== 'function') return;
        
        try {
            const cart = JSON.parse(localStorage.getItem('aresnyx_cart') || '[]');
            if (cart.length > 0) {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                
                gtag('event', 'begin_checkout', {
                    currency: 'RSD',
                    value: total,
                    items: cart.map(item => ({
                        item_id: item.id || 'unknown',
                        item_name: item.name || 'Proizvod',
                        item_category: item.category || 'Donji veš',
                        item_variant: item.variant || 'standard',
                        price: item.price || 0,
                        quantity: item.quantity || 1
                    }))
                });
                
                console.log('GA4: Tracked begin checkout');
            }
        } catch (e) {
            console.log('GA4: Could not track checkout:', e);
        }
    },
    
    trackPurchase: function() {
        if (typeof gtag !== 'function') return;
        
        try {
            const cart = JSON.parse(localStorage.getItem('aresnyx_cart') || '[]');
            if (cart.length > 0) {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const transactionId = 'ARESNYX_' + Date.now();
                
                gtag('event', 'purchase', {
                    transaction_id: transactionId,
                    currency: 'RSD',
                    value: total,
                    tax: 0,
                    shipping: 0,
                    items: cart.map(item => ({
                        item_id: item.id || 'unknown',
                        item_name: item.name || 'Proizvod',
                        item_category: item.category || 'Donji veš',
                        item_variant: item.variant || 'standard',
                        price: item.price || 0,
                        quantity: item.quantity || 1
                    }))
                });
                
                console.log('GA4: Tracked purchase:', transactionId, total + ' RSD');
            }
        } catch (e) {
            console.log('GA4: Could not track purchase:', e);
        }
    }
};

// Pokreni tracking kada se stranica učita
document.addEventListener('DOMContentLoaded', function() {
    ga4Tracking.init();
});
</script>
    
    <!-- OSTALI META TAGOVI... -->
    <meta name="google-site-verification" content="AbTZDR5hcpu1fcUcq1wsTOXlimqbvy_-tjSh7IVb-GE" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AresNyX Shop - Premium Boxer Shorts</title>

    <link rel="preload" 
          as="image" 
          href="https://aresnyx.github.io/AresNyX/slike/slika1.webp">

    <link rel="stylesheet" href="style.css"> 

    <meta name="description" 
          content="AresNyX Shop - Premium boxer shorts od pamuka, lana i bambusa. 
                   Zdravlje, udobnost i besplatna dostava.">
    <meta name="keywords" 
          content="boxer shorts, donji veš, pamučni gaćice, muški donji veš, 
                   AresNyX, kupovina, zdravlje, udobnost">
    <meta name="author" content="AresNyX">
    <meta name="robots" content="index, follow">
    
    <meta property="og:title" content="AresNyX Shop - Premium Boxer Shorts">
    <meta property="og:description" 
          content="Premium boxer shorts od prirodnih materijala. 
                   Pamuk, lan i bambus za optimalnu ventilaciju.">
    <meta property="og:image" content="https://aresnyx.github.io/AresNyX/slike/logo.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://aresnyx.github.io/AresNyX/shop.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="AresNyX">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AresNyX Shop - Premium Boxer Shorts">
    <meta name="twitter:description" 
          content="Premium boxer shorts od prirodnih materijala. 
                   Zdravlje i udobnost.">
                   
    </head>
<body>
<header>
    <img 
        src="slike/logo.webp" 
        alt="AresNyX Logo" 
        class="header-logo"
        width="70" 
        height="70"
    >
    <h1>
        <span class="brand-emphasis">ARESNYX</span><br>
        <span class="subtitle">BOXER SHORTS</span>
    </h1>
</header>

<nav aria-label="Glavna navigacija i Korpa">
    <a href="index.html">Početna</a>
    <a href="shop.html" class="active" aria-current="page">Shop</a>
    <a href="o-nama.html">O Nama</a>
    <a href="blog-zdravlje-donjeg-vesa.html">Blog</a>
    <a href="kontakt.html">Kontakt</a>
    
    <a href="javascript:void(0)" onclick="shop.toggleCart()" class="cart-nav-link">
        <i class="fas fa-shopping-bag"></i>
        Korpa (<span id="cartCount">0</span>)
    </a>
</nav>

    <main class="main-content">
        <section class="products-section">
    
    <div class="shop-controls">
    <button class="filter-sort-btn" onclick="shop.toggleFilterPanel()">
        <span class="icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="7" y1="6" x2="17" y2="6"></line>
                <line x1="11" y1="18" x2="13" y2="18"></line>
            </svg>
        </span>
        Filter
    </button>
</div>

<div class="filter-sort-panel" id="filterSortPanel">
    
    <h3>Sortiranje</h3>
    <div class="filter-group">
        <label for="priceSort">Cena:</label>
        <select id="priceSort" onchange="shop.sortProducts(this.value)">
            <option value="default">Podrazumevano</option>
            <option value="lowToHigh">Najniža ka najvišoj</option>
            <option value="highToLow">Najviša ka najnižoj</option>
        </select>
    </div>

    <h3>Filter po Materijalu</h3>
    <div class="filter-group">
        <label for="materialFilter">Materijal:</label>
        <select id="materialFilter" onchange="shop.filterProducts(this.value, 'material')">
            <option value="all">Svi materijali</option>
            <option value="pamuk">Pamuk</option>
            <option value="lan">Lan</option>
            <option value="bambus">Bambus</option>
            <option value="svila">Svila</option>
        </select>
    </div>

    <h3>Filter po Veličini</h3>
    <div class="size-filter-options" id="sizeFilterOptions">
    <button class="size-btn" data-size="S">S</button>
    <button class="size-btn" data-size="M">M</button>
    <button class="size-btn" data-size="L">L</button>
    <button class="size-btn" data-size="XL">XL</button>
    <button class="size-btn" data-size="XXL">XXL</button>
    <button class="size-btn active" data-size="all">Sve</button>
</div>  
    <button class="apply-filters-btn" onclick="shop.applyAllFilters()">Primeni filtere</button>

</div>
    </div>
    <div class="products-grid" id="productsGrid">
        </div>
</section>
    </main>
<footer class="footer">
    <div class="footer-content">
        <div class="footer-logo">ARESNYX</div>
        <p class="footer-tagline">Premium kvalitet. Izuzetan komfor. Vaš stil.</p>
        
        <div class="footer-links">
            <a href="index.html" class="footer-link">Početna</a>
            <a href="shop.html" class="footer-link">Shop</a>
            <a href="o-nama.html" class="footer-link">O nama</a>
            <a href="kontakt.html" class="footer-link">Kontakt</a>
        </div>
        <div class="footer-social">
    
    <a href="https://www.instagram.com/aresnyxsea?igsh=MXcwajJubDN6Mjlscg==" class="social-icon" aria-label="Instagram">
        <svg viewBox="0 0 448 512" preserveAspectRatio="xMidYMid meet">
            <path d="M224 202.8c-20.9 0-37.8 16.9-37.8 37.8s16.9 37.8 37.8 37.8 37.8-16.9 37.8-37.8-16.9-37.8-37.8-37.8zM400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM317.7 114.3c-2.3 0-4.6 1.1-6.2 3.1-1.6 2-2.1 4.5-1.4 6.9l.4 1.7c1.3 4.2 4.4 7.6 8.5 9.4 4.1 1.8 8.6 1.6 12.5-.6 3.9-2.2 6.8-6 7.7-10.4 1-4.4-.3-9.1-3.6-12.4-3.3-3.2-7.8-4.9-12.2-4.7zM400 376c0 10.6-8.6 19.2-19.2 19.2H67.2c-10.6 0-19.2-8.6-19.2-19.2V136.6c0-10.6 8.6-19.2 19.2-19.2h313.6c10.6 0 19.2 8.6 19.2 19.2v239.4z"/>
        </svg>
    </a>
    
    <a href="https://www.facebook.com/profile.php?id=61584421934352" class="social-icon" aria-label="Facebook">
        <svg viewBox="0 0 320 512" preserveAspectRatio="xMidYMid meet">
            <path d="M279.1 288l14.22-92.66h-88.91V115.1c0-26.23 10.99-46.37 46.23-46.37h42.22V6.511C312.7 5.713 297.8 5.395 283.4 5.176c-48.44-4.8-87.39 12.43-124.9 50.15c-37.52 37.71-55.82 86.81-55.82 153.9V288h-68.52v92.66h68.52v221.7C174.5 502.8 250 491 250 422.3V288h29.14z"/>
        </svg>
    </a>
    
    <a href="https://x.com/aresnyxofficial" class="social-icon" aria-label="X (Twitter)">
        <svg viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet">
            <path d="M389.2 48h70.6L305.6 224.2 487 464H397.4L266.8 309.4 163.7 464H93.3L268.6 261.7 85.5 48H175.1L289.4 186.2 389.2 48zM364.4 421.8h37.7L151.4 88.5H111L364.4 421.8z"/>
        </svg>
    </a>
    
    <a href="https://www.tiktok.com/@aresnyxsea?_r=1&_t=ZM-91yEAP4212e" class="social-icon" aria-label="TikTok">
        <svg viewBox="0 0 448 512" preserveAspectRatio="xMidYMid meet">
            <path d="M448 103.1v205.4c0 7.8-6.8 14.1-15.1 14.1s-15.1-6.3-15.1-14.1V130.6c-18.4 5.4-38.2 11.7-57.9 18.2c-5.8 1.9-11.5 3.8-17.2 5.6c-28.7 9.4-58.6 17.5-88.7 23.9V336c0 106.1-90.1 176-193.3 176C56.6 512 0 448.9 0 348.6c0-101.4 75.6-173.3 186.1-175.6V315.6c-43.1 0-77.8 38.6-77.8 86.8c0 47.3 34.6 85.5 77.8 85.5c41.2 0 74.3-33 74.3-85.5V93.5c0-6.3 5.1-11.4 11.4-11.4c6.3 0 11.4 5.1 11.4 11.4v205.8c0 7.8-6.8 14.1-15.1 14.1s-15.1-6.3-15.1-14.1V103.1c0-6.3 5.1-11.4 11.4-11.4c6.3 0 11.4 5.1 11.4 11.4v205.8c0 7.8-6.8 14.1-15.1 14.1s-15.1-6.3-15.1-14.1V103.1z"/>
        </svg>
    </a>
</div>
        <div class="footer-bottom">
            <p>&copy; 2024 AresNyX. Sva prava zadržana.</p>
        </div>
    </div>
</footer>

    <div class="modal-overlay" id="productModal">
        <div class="modal-container">
            <button class="modal-close" onclick="shop.closeModal()">×</button>
            <div class="modal-content">
                <div class="modal-gallery">
                    <img class="modal-main-image" id="modalMainImage" src="" alt="Detaljni prikaz bokserica" loading="lazy" width="300" height="450">
                    <div class="slider-nav">
                        <button id="prevImageBtn" onclick="shop.prevImage()"><i class="fas fa-chevron-left"></i> Prethodna</button>
                        <button id="nextImageBtn" onclick="shop.nextImage()">Sledeća <i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                
                <div class="modal-details">
                    <h2 id="modalTitle"></h2>
                    <p class="modal-material" id="modalMaterial"></p>
                    <p class="modalPrice" id="modalPrice"></p>
                    
                    <div class="size-section">
                        <h3>Odaberite veličinu:</h3>
                        <div class="size-selector" id="sizeSelector"></div>
                        <div class="size-info" onclick="shop.toggleSizeTable()">
                            <i class="fas fa-ruler"></i>
                            <span>Tabela veličina</span>
                        </div>
                    </div>

                    <div class="size-table-container" id="sizeTable" style="display: none;">
                        <h4><i class="fas fa-table"></i> Tabela veličina (cm)</h4>
                        <table class="size-table">
                            <thead>
                                <tr><th>Veličina</th><th>Struk</th><th>Dužina</th><th>Širina nogavice</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>M</strong></td><td>72-76</td><td>28</td><td>24</td></tr>
                                <tr><td><strong>L</strong></td><td>77-81</td><td>29</td><td>25</td></tr>
                                <tr><td><strong>XL</strong></td><td>82-86</td><td>30</td><td>26</td></tr>
                                <tr><td><strong>XXL</strong></td><td>87-91</td><td>31</td><td>27</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="quantity-section">
                        <h3>Količina:</h3>
                        <div class="quantity-selector">
                            <button class="qty-btn" onclick="shop.changeQuantity(-1)">-</button>
                            <span class="qty-display" id="modalQty">1</span>
                            <button class="qty-btn" onclick="shop.changeQuantity(1)">+</button>
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button class="add-to-cart-btn" onclick="shop.addToCartFromModal(event)">
                            <i class="fas fa-shopping-cart"></i> Dodaj u Korpu
                        </button>
                        <button class="continue-shopping" onclick="shop.closeModal()">
                            Nastavi kupovinu
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
    
    <div class="cart-header">
        <h3>Vaša Korpa</h3>
        <button class="modal-close" onclick="shop.toggleCart()">×</button>
    </div>
    
    <div class="cart-promo-message" id="cartPromoMessage">
        </div>

    <div class="cart-items" id="cartItems">
        <div class="empty-cart" id="emptyCart">
            <i class="fas fa-shopping-bag" style="font-size: 3rem; color: #ccc;"></i>
            <p>Vaša korpa je prazna</p>
        </div>
    </div>
    
    <div class="cart-footer" id="cartFooter" style="display: none;">
        
        <div class="cart-actions-footer">
            <button class="clear-cart-btn" onclick="shop.clearCart()">
                <i class="fas fa-trash"></i> Isprazni Korpu
            </button>
        </div>

        <div class="cart-totals">
            <div class="cart-total-row"><span>Međuzbir:</span><span id="cartSubtotal">0 RSD</span></div>
            <div class="cart-total-row"><span>Poštarina:</span><span id="cartShipping">0 RSD</span></div>
            <div class="cart-total-row"><span>Popust:</span><span id="cartDiscount">0 RSD</span></div>
            <div class="cart-total-row final"><span>Ukupno:</span><span id="cartTotal">0 RSD</span></div>
        </div>
        <button class="checkout-btn" onclick="shop.startCheckout()"><i class="fas fa-truck"></i> Završi Kupovinu</button>
    </div>
</div>  
    <div class="modal-overlay" id="checkoutModal">
        <div class="modal-container">
            <button class="modal-close" onclick="shop.closeCheckoutModal()">×</button>
            <div class="modal-content" id="checkoutModalContent">
                
                <div id="checkoutStep1">
                    <form class="checkout-form" onsubmit="shop.submitShippingForm(event)">
                        <h2>Podaci za isporuku</h2>
                        
                        <div class="form-group"><label for="ime">Ime*</label><input type="text" id="ime" required></div>
                        <div class="form-group"><label for="prezime">Prezime*</label><input type="text" id="prezime" required></div>
                        <div class="form-group"><label for="email">Email*</label><input type="email" id="email" required></div>
                        
                        <div class="form-group"><label for="telefon">Telefon (mobilni)*</label><input type="tel" id="telefon" required></div>
                        
                        <div class="form-group"><label for="ulica">Ulica i broj*</label><input type="text" id="ulica" required></div>
                        
                        <div class="form-group"><label for="postanskiBroj">Poštanski broj*</label><input type="text" id="postanskiBroj" required></div>
                        <div class="form-group"><label for="grad">Grad*</label><input type="text" id="grad" required></div>
                        <div class="form-group"><label for="opstina">Opština</label><input type="text" id="opstina"></div>

                        <div class="form-group">
                            <label for="placanje">Način plaćanja*</label>
                            <select id="placanje" required>
                                <option value="pouzecem" selected>Pouzećem (Plaćanje prilikom preuzimanja)</option>
                                <option value="racun">Uplata na račun (E-banking)</option>
                                <option value="licno">Lično preuzimanje (dogovor)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="napomena">Napomena za porudžbinu</label>
                            <textarea id="napomena" placeholder="Npr. Vremenska ograničenja za isporuku, dodatne informacije..."></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn"><i class="fas fa-arrow-right"></i> Pregled i Potvrda Porudžbine</button>
                    </form>
                </div>
                
                <div id="checkoutStep2" style="display: none;">
                    <h2>Pregled Porudžbine</h2>
                    <div class="preview-container">
                        <div class="preview-shipping">
                            <h3>Podaci za isporuku</h3>
                            <p id="previewIme"></p>
                            <p id="previewEmail"></p>
                            <p id="previewTelefon"></p><p id="previewAdresa"></p>
                            <p id="previewPostaGrad"></p>
                            <p id="previewPlacanje"></p>
                            <p id="previewNapomena"></p>
                        </div>
                        <div class="preview-order">
                            <h3>Struktura poručene robe</h3>
                            <div id="previewOrderItems"></div>
                            <div class="cart-totals">
                                <div class="cart-total-row"><span>Međuzbir:</span><span id="previewSubtotal"></span></div>
                                <div class="cart-total-row"><span>Poštarina:</span><span id="previewShipping"></span></div>
                                <div class="cart-total-row"><span>Popust:</span><span id="previewDiscount"></span></div>
                                <div class="cart-total-row final"><span>Ukupno:</span><span id="previewTotal"></span></div>
                            </div>
                        </div>
                    </div>
                    <div class="preview-actions">
                        <button class="edit-data-btn" onclick="shop.goToStep(1)"><i class="fas fa-edit"></i> Izmeni Podatke</button>
                        <button class="submit-order-btn" onclick="shop.completeOrder()"><i class="fas fa-paper-plane"></i> Pošalji Porudžbinu</button>
                    </div>
                </div>

                <div id="checkoutStep3" style="display: none;">
                    <div class="success-message">
                        <h2><i class="fas fa-check-circle"></i> Hvala na poverenju!</h2>
                        <p>Vaša porudžbina je uspešno primljena i biće obrađena u najkraćem mogućem roku.</p>
                        <p>Detalji su poslati na Vašu email adresu: <strong id="confirmationEmail"></strong></p>
                        <p>Uskoro ćete biti kontaktirani radi potvrde porudžbine.</p>
                        <button class="submit-btn" onclick="shop.closeCheckoutModal()">Nastavite sa kupovinom</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js" defer></script>
                                                                    
    <script src="script.js" defer></script> 
    
</body>
    </html>
